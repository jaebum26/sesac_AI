<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>모듈 프로젝트</title>
    
</head>
<body>
    <h1>제목</h1>

    <h3>음악 시작버튼</h3>
    <div><button type="button" id="start">시작</button></div>

    <h3>볼륨 조절</h3>
    <div><input type="range" id="volume" value="0.2" max="1" step="0.1"></div>

    <h4>-------------------------------------------------------------------------------------------------------------------------------------------------------------------------</h4>
    <div><button onclick="goToPage2()">다음 페이지로</button><button onclick="goTowebcam()">웹캠</button></div>

    <script>
        "use strict";
    
        // HTML 요소들을 가져옵니다.
        const resolution = document.getElementById("resolution");
        const ui = document.getElementById("ui");
        const normal = document.getElementById("normal");
        const chaos = document.getElementById("chaos");
        const volume = document.getElementById("volume");
        const audio = new Audio("data:audio/mpeg;base64"); // Audio 객체 생성
        audio.volume = volume.value;
    
        const start = document.getElementById("start");
        const stop = document.getElementById("stop");
        const phase1 = document.getElementById("phase1");
        const phase2 = document.getElementById("phase2");
        const invalid = document.getElementById("invalid");
        const video = document.getElementById("video");
        const context = document.getElementById("canvas").getContext("2d", { willReadFrequently: true });
    
        // 초기화할 변수들을 선언합니다.
        let sx1, sy1;
        let sx2, sy2;
        let delay;
        let painterId, triggerId, timerId;
        let running = false;
    
        // 볼륨 조절 이벤트를 추가합니다.
        volume.addEventListener("input", e => {
            audio.volume = e.target.value;
            audio.play();
        });
    
        // 시작 버튼 클릭 이벤트를 추가합니다.
        start.addEventListener("click", async e => {
            video.srcObject = await navigator.mediaDevices.getDisplayMedia();
            video.srcObject.getVideoTracks()[0].addEventListener("ended", e => stopVideo());
    
            setCoordinates();
            setPainterId();
    
            setInputsState(true);
        });
    
        // 좌표 설정 함수
        function setCoordinates() {
            switch (resolution.value) {
                case "1920x1080":
                    if (ui.checked) {
                        sx1 = 17, sy1 = 98;
                        sx2 = 16, sy2 = 106;
                    } else {
                        sx1 = 26, sy1 = 138;
                        sx2 = 24, sy2 = 149;
                    }
                    break;
                case "1366x768":
                    sx1 = 17, sy1 = 98;
                    sx2 = 16, sy2 = 106;
                    break;
            }
        }
    
        // 다른 함수들을 정의할 수 있습니다.
    
    </script>

    <script>
        function goToPage2() {
            // 페이지 이동
            window.location.href = "모듈 프로젝트2.html";
        }
    </script>

    <script>
        function goTowebcam() {
            // 페이지 이동
            window.location.href = "모듈 프로젝트(웹캠).html";
        }
    </script>
</body>
</html>